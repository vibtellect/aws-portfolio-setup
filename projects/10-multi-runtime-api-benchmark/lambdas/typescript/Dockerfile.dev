FROM node:20-slim

WORKDIR /app

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm ci

# Install development tools
RUN npm install -g nodemon tsx

# Copy source code
COPY . .

# Build TypeScript
RUN npm run build

# Expose port
EXPOSE 8001

# Run with hot reload
CMD ["nodemon", "--watch", "src", "--ext", "ts", "--exec", "tsx", "src/index.ts"]
